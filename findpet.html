<!DOCTYPE html>
<html>
  <head>
    <title>Find a Pet</title>
    <link rel="stylesheet" href="search.css" />
    <link rel="stylesheet" type="text/css" href="findpet.css" />
    <link rel="stylesheet" type="text/css" href="pagination.css" />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var logo = document.querySelector(".logo img");
        var logoUrl = localStorage.getItem("logoUrl");
        if (logoUrl) {
          logo.src = logoUrl;
        } else {
          logoUrl = "images/pet.png"; 
          localStorage.setItem("logoUrl", logoUrl);
          logo.src = logoUrl;
        }
      });

      function checkLogin() {
        var token = localStorage.getItem("token");
        if (!token) {
          alert("You need to login first!");
          window.location.href = "login.html";
        } else {
          window.location.href = "pet rescuer.html";
        }
      }
    </script>
  </head>
  <body>
    <nav>
      <div class="navbar">
        <a href="index.html" class="logo">
          <img src="D:\Pet Adoption Management\images\pet.png" alt="Logo" />
          <span class="logo-text">Pet Adoption Hub</span>
        </a>
        <div class="navbar-left">
          <a href="#" onclick="checkLogin()">Pet Rescuer</a>
          <a href="findpet.html">Find a Pet</a>
          <a href="#">How it Works</a>
          <a href="#">Furry Stories</a>
        </div>
        <div class="navbar-right" id="navbarRight">
          <span id="loggedInUser" style="display: none"></span>
          <a href="signup.html" class="signup-button" id="signupButton">Sign Up</a>
          <a href="login.html" class="login-button" id="loginButton">Log In</a>
          <a href="signout.html" class="signout-button" id="signoutButton" style="display: none;">Sign Out</a>
        </div>
      </div>
    </nav>

    <div id="searchSection">
      <h2>Search your desired pet!</h2>
      <label for="searchPetType">Pet Type:</label>
      <input type="text" id="searchPetType" />

      <label for="searchPetAge">Pet Age:</label>
      <input type="text" id="searchPetAge" />

      <button id="searchButton">Search</button>
    </div>

    <div id="petListContainer"></div>

    <div><button id="deleteSelectedBtn">Delete Selected</button></div>

    <div id="paginationContainer"></div>

    <!-- Modal -->
    <div id="contactModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Contact Information</h2>
        <p><strong>Username:</strong> <span id="modalUsername"></span></p>
        <p><strong>Email:</strong> <span id="modalEmail"></span></p>
        <p>
          <strong>Phone Number:</strong> <span id="modalPhoneNumber"></span>
        </p>
      </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
      <div class="modal-content">
        <span class="close-edit">&times;</span>
        <h2>Edit Pet Data</h2>
        <form id="editForm">
          <label for="editPetName">Pet Name:</label>
          <input type="text" id="editPetName" required /><br />

          <label for="editPetType">Pet Type:</label>
          <input type="text" id="editPetType" required /><br />

          <label for="editPetBreed">Pet Breed:</label>
          <input type="text" id="editPetBreed" required /><br />

          <label for="editPetAge">Pet Age:</label>
          <input type="number" id="editPetAge" required /><br />

          <label for="editPetDescription">Pet Description:</label>
          <textarea id="editPetDescription" required></textarea><br />

          <button type="submit">Save Changes</button>
        </form>
      </div>
    </div>
    <script src="search.js"></script>
    <script src="findpet.js"></script>
    <script src="pagination.js"></script>
    <script src="utils.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var token = localStorage.getItem("token");
        var loggedInUsername = localStorage.getItem("loggedInUsername");
        var signupButton = document.getElementById("signupButton");
        var loginButton = document.getElementById("loginButton");
        var loggedInUser = document.getElementById("loggedInUser");
        var signoutButton = document.getElementById("signoutButton");

        if (token && loggedInUsername) {
          signupButton.style.display = "none";
          loginButton.style.display = "none";
          loggedInUser.style.display = "inline-block";
          loggedInUser.textContent = "Welcome, " + loggedInUsername;
          signoutButton.style.display = "inline-block";
        }
      });
    </script>
  </body>
</html>
